-- SNIPPET : Appliquer ce code dans un compilateur LUA


# obtenir MAP.COLOR, MAP.COLOR.NB, MAP.LARGEUR, MAP.HAUTEUR #


-- Remplacer l'exemple par votre dessin
local map =    {
        {99,99,99,99,99,99,99,99,99,99,99,00,00,99,00,00,99,99,99,99,99,99,99,99,99,99,99},
        {99,99,99,99,99,99,99,99,99,99,00,09,09,00,09,09,00,99,99,99,99,99,99,99,99,99,99},
        {99,99,00,00,00,00,00,99,99,00,09,10,10,10,10,10,09,00,99,99,00,00,00,00,00,99,99},
        {99,99,00,06,06,06,06,00,99,00,09,10,10,10,10,10,09,00,99,00,06,06,06,06,00,99,99},
        {99,99,00,06,06,06,06,06,00,09,10,10,10,10,10,10,10,09,00,06,06,06,06,06,00,99,99},
        {99,99,00,06,06,06,06,06,00,10,10,10,10,10,10,10,10,10,00,06,06,06,06,06,00,99,99},
        {99,99,00,06,06,06,06,06,00,10,10,10,10,10,10,10,10,10,00,06,06,06,06,06,00,99,99},
        {99,99,99,00,06,06,06,06,00,10,10,10,10,10,10,10,10,10,00,06,06,06,06,00,99,99,99},
        {99,99,99,99,00,00,00,00,06,00,10,10,10,10,10,10,10,00,06,00,00,00,00,99,99,99,99},
        {99,99,00,00,09,10,10,10,00,00,10,10,10,00,10,10,10,00,00,10,10,10,09,00,00,99,99},
        {99,00,09,09,10,10,10,10,10,10,00,10,10,00,10,10,00,10,10,10,10,10,10,09,09,00,99},
        {00,09,10,10,10,10,10,10,10,10,10,00,10,00,10,00,10,10,10,10,10,10,10,10,10,09,00},
        {00,09,10,10,10,10,10,10,10,10,10,10,00,03,00,10,10,10,10,10,10,10,10,10,10,09,00},
        {99,00,10,10,10,10,10,10,10,00,00,00,03,04,03,00,00,00,10,10,10,10,10,10,10,00,99},
        {00,09,10,10,10,10,10,10,10,10,10,10,00,03,00,10,10,10,10,10,10,10,10,10,10,09,00},
        {00,09,10,10,10,10,10,10,10,10,10,00,10,00,10,00,10,10,10,10,10,10,10,10,10,09,00},
        {99,00,09,09,10,10,10,10,10,10,00,10,10,00,10,10,00,10,10,10,10,10,10,09,09,00,99},
        {99,99,00,00,09,10,10,10,00,00,10,10,10,00,10,10,10,00,00,10,10,10,09,00,00,99,99},
        {99,99,99,99,00,00,00,00,06,00,10,10,10,10,10,10,10,00,06,00,00,00,00,99,99,99,99},
        {99,99,99,00,06,06,06,06,00,10,10,10,10,10,10,10,10,10,00,06,06,06,06,00,99,99,99},
        {99,99,00,06,06,06,06,06,00,10,10,10,10,10,10,10,10,10,00,06,06,06,06,06,00,99,99},
        {99,99,00,06,06,06,06,06,00,10,10,10,10,10,10,10,10,10,00,06,06,06,06,06,00,99,99},
        {99,99,00,06,06,06,06,06,00,09,10,10,10,10,10,10,10,09,00,06,06,06,06,06,00,99,99},
        {99,99,00,06,06,06,06,00,99,00,09,10,10,10,10,10,09,00,99,00,06,06,06,06,00,99,99},
        {99,99,00,00,00,00,00,99,99,00,09,10,10,10,10,10,09,00,99,99,00,00,00,00,00,99,99},
        {99,99,99,99,99,99,99,99,99,99,00,09,09,00,09,09,00,99,99,99,99,99,99,99,99,99,99},
        {99,99,99,99,99,99,99,99,99,99,99,00,00,99,00,00,99,99,99,99,99,99,99,99,99,99,99},
    }

local color = {}
local count_i = 0
local count_j = 0

-- Compter le nombre d'éléments sur la première ligne
for i = 1, #map[1] do
    count_i = count_i + 1
end

-- Compter le nombre d'éléments sur la première colonne
for j = 1, #map do
    count_j = count_j + 1
end

for i = 1, #map do
    for j = 1, #map[i] do
        local value = map[i][j]
        if value ~= 99 then
            local found = false
            for k = 1, #color do
                if color[k][1] == value then
                    color[k][2] = color[k][2] + 1
                    found = true
                    break
                end
            end
            if not found then
                table.insert(color, {value, 1})
            end
        end
    end
end

-- Construire les chaînes de caractères pour l'affichage
local numbers = "{"
local quantities = "{"

for i, pair in ipairs(color) do
    numbers = numbers .. string.format("%02d", pair[1])
    quantities = quantities .. pair[2]
    if i < #color then
        numbers = numbers .. ","
        quantities = quantities .. ","
    end
end

numbers = numbers .. "}"
quantities = quantities .. "}"

-- Afficher les résultats
print(numbers .. ", " .. quantities)
print("Nombre d'éléments sur la première ligne (i):", count_i)
print("Nombre d'éléments sur la première colonne (j):", count_j)


# Créer un tableau vierge selon la hauteur et la largeur #


local X = 21  -- Indiquer la largeur 
local Y = 30  -- Indiquer la hauteur 

local tableau = {}

for i = 1, Y do
    tableau[i] = {}
    for j = 1, X do
        tableau[i][j] = 99
    end
end

-- Affichage du tableau sans espaces inutiles
print("Largeur : "..X )
print("Hauteur : "..Y )
print("{")
for i = 1, Y do
    print("    {" .. table.concat(tableau[i], ",") .. "},")
end
print("}")